(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[666],{13067:function(e,t,r){Promise.resolve().then(r.t.bind(r,56656,23)),Promise.resolve().then(r.t.bind(r,26208,23)),Promise.resolve().then(r.t.bind(r,8169,23)),Promise.resolve().then(r.t.bind(r,33699,23)),Promise.resolve().then(r.bind(r,63530)),Promise.resolve().then(r.bind(r,61726)),Promise.resolve().then(r.bind(r,11507)),Promise.resolve().then(r.bind(r,67303)),Promise.resolve().then(r.bind(r,83662)),Promise.resolve().then(r.bind(r,44478)),Promise.resolve().then(r.bind(r,23065)),Promise.resolve().then(r.bind(r,15934)),Promise.resolve().then(r.bind(r,92873)),Promise.resolve().then(r.bind(r,72077)),Promise.resolve().then(r.bind(r,12335)),Promise.resolve().then(r.bind(r,69235))},69235:function(e,t,r){"use strict";r.r(t),r.d(t,{Actions:function(){return u}});var s=r(57437),a=r(29222),n=r(4737),i=r(2265),l=r(5925),o=r(24033),d=r(3762),c=r(68746),m=r(57645);let u=e=>{let{disabled:t,courseId:r,isPublished:u}=e,f=(0,o.useRouter)(),x=(0,m.m)(),[p,h]=(0,i.useState)(!1),g=async()=>{try{h(!0),u?(await a.Z.patch("/api/courses/".concat(r,"/unpublish")),l.ZP.success("Course unpublished")):(await a.Z.patch("/api/courses/".concat(r,"/publish")),l.ZP.success("Course published"),x.onOpen()),f.refresh()}catch(e){l.ZP.error("Something went wrong")}finally{h(!1)}},j=async()=>{try{h(!0),await a.Z.delete("/api/courses/".concat(r)),l.ZP.success("Course deleted"),f.refresh(),f.push("/teacher/courses")}catch(e){l.ZP.error("Something went wrong")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(d.z,{onClick:g,disabled:t||p,variant:"outline",size:"sm",children:u?"Unpublish":"Publish"}),(0,s.jsx)(c.s,{onConfirm:j,children:(0,s.jsx)(d.z,{size:"sm",disabled:p,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})})]})}},72077:function(e,t,r){"use strict";r.r(t),r.d(t,{AttachmentForm:function(){return p}});var s=r(57437),a=r(74578),n=r(29222),i=r(91981),l=r(28734),o=r(86264),d=r(82549),c=r(2265),m=r(5925),u=r(24033),f=r(3762),x=r(64178);a.Ry({url:a.Z_().min(1)});let p=e=>{let{initialData:t,courseId:r}=e,[a,p]=(0,c.useState)(!1),[h,g]=(0,c.useState)(null),j=()=>p(e=>!e),b=(0,u.useRouter)(),y=async e=>{try{await n.Z.post("/api/courses/".concat(r,"/attachments"),e),m.ZP.success("Course updated"),j(),b.refresh()}catch(e){m.ZP.error("Something went wrong")}},v=async e=>{try{g(e),await n.Z.delete("/api/courses/".concat(r,"/attachments/").concat(e)),m.ZP.success("Attachment deleted"),b.refresh()}catch(e){m.ZP.error("Something went wrong")}finally{g(null)}};return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course attachments",(0,s.jsxs)(f.z,{onClick:j,variant:"ghost",children:[a&&(0,s.jsx)(s.Fragment,{children:"Cancel"}),!a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Add a file"]})]})]}),!a&&(0,s.jsxs)(s.Fragment,{children:[0===t.attachments.length&&(0,s.jsx)("p",{className:"text-sm mt-2 text-slate-500 italic",children:"No attachments yet"}),t.attachments.length>0&&(0,s.jsx)("div",{className:"space-y-2",children:t.attachments.map(e=>(0,s.jsxs)("div",{className:"flex items-center p-3 w-full bg-sky-100 border-sky-200 border text-sky-700 rounded-md",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-xs line-clamp-1",children:e.name}),h===e.id&&(0,s.jsx)("div",{children:(0,s.jsx)(o.Z,{className:"h-4 w-4 animate-spin"})}),h!==e.id&&(0,s.jsx)("button",{onClick:()=>v(e.id),className:"ml-auto hover:opacity-75 transition",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})]},e.id))})]}),a&&(0,s.jsxs)("div",{children:[(0,s.jsx)(x.p,{endpoint:"courseAttachment",onChange:e=>{e&&y({url:e})}}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-4",children:"Add anything your students might need to complete the course."})]})]})}},15934:function(e,t,r){"use strict";r.r(t),r.d(t,{CategoryForm:function(){return D}});var s=r(57437),a=r(74578),n=r(29222),i=r(38110),l=r(61865),o=r(53905),d=r(2265),c=r(5925),m=r(24033),u=r(66737),f=r(3762),x=r(70306),p=r(39957),h=r(62442),g=r(6478),j=r(41827),b=r(28712),y=r(82549);b.fC,b.xz;let v=e=>{let{className:t,...r}=e;return(0,s.jsx)(b.h_,{className:(0,x.cn)(t),...r})};v.displayName=b.h_.displayName;let N=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.aV,{ref:t,className:(0,x.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});N.displayName=b.aV.displayName;let w=d.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(v,{children:[(0,s.jsx)(N,{}),(0,s.jsxs)(b.VY,{ref:t,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",r),...n,children:[a,(0,s.jsxs)(b.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});w.displayName=b.VY.displayName;let C=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.Dx,{ref:t,className:(0,x.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});C.displayName=b.Dx.displayName;let Z=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(b.dk,{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",r),...a})});Z.displayName=b.dk.displayName;let k=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.mY,{ref:t,className:(0,x.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});k.displayName=g.mY.displayName;let P=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(j.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(g.mY.Input,{ref:t,className:(0,x.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});P.displayName=g.mY.Input.displayName;let S=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.mY.List,{ref:t,className:(0,x.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});S.displayName=g.mY.List.displayName;let R=d.forwardRef((e,t)=>(0,s.jsx)(g.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));R.displayName=g.mY.Empty.displayName;let F=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.mY.Group,{ref:t,className:(0,x.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});F.displayName=g.mY.Group.displayName;let z=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.mY.Separator,{ref:t,className:(0,x.cn)("-mx-1 h-px bg-border",r),...a})});z.displayName=g.mY.Separator.displayName;let I=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.mY.Item,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...a})});I.displayName=g.mY.Item.displayName;var _=r(65050);let Y=_.fC,V=_.xz,E=d.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:n=4,...i}=e;return(0,s.jsx)(_.h_,{children:(0,s.jsx)(_.VY,{ref:t,align:a,sideOffset:n,className:(0,x.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})});E.displayName=_.VY.displayName;let U=e=>{var t;let{options:r,value:a,onChange:n}=e,[i,l]=d.useState(!1);return(0,s.jsxs)(Y,{open:i,onOpenChange:l,children:[(0,s.jsx)(V,{asChild:!0,children:(0,s.jsxs)(f.z,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between",children:[a?null===(t=r.find(e=>e.value===a))||void 0===t?void 0:t.label:"Select option...",(0,s.jsx)(p.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(E,{className:"w-full p-0",children:(0,s.jsxs)(k,{children:[(0,s.jsx)(P,{placeholder:"Search option..."}),(0,s.jsx)(R,{children:"No option found."}),(0,s.jsx)(F,{children:r.map(e=>(0,s.jsxs)(I,{onSelect:()=>{n(e.value===a?"":e.value),l(!1)},children:[(0,s.jsx)(h.Z,{className:(0,x.cn)("mr-2 h-4 w-4",a===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]})},A=a.Ry({categoryId:a.Z_().min(1)}),D=e=>{let{initialData:t,courseId:r,options:a}=e,[p,h]=(0,d.useState)(!1),g=()=>h(e=>!e),j=(0,m.useRouter)(),b=(0,l.cI)({resolver:(0,i.F)(A),defaultValues:{categoryId:(null==t?void 0:t.categoryId)||""}}),{isSubmitting:y,isValid:v}=b.formState,N=async e=>{try{await n.Z.patch("/api/courses/".concat(r),e),c.ZP.success("Course updated"),g(),j.refresh()}catch(e){c.ZP.error("Something went wrong")}},w=a.find(e=>e.value===t.categoryId);return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course category",(0,s.jsx)(f.z,{onClick:g,variant:"ghost",children:p?(0,s.jsx)(s.Fragment,{children:"Cancel"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Edit category"]})})]}),!p&&(0,s.jsx)("p",{className:(0,x.cn)("text-sm mt-2",!t.categoryId&&"text-slate-500 italic"),children:(null==w?void 0:w.label)||"No category"}),p&&(0,s.jsx)(u.l0,{...b,children:(0,s.jsxs)("form",{onSubmit:b.handleSubmit(N),className:"space-y-4 mt-4",children:[(0,s.jsx)(u.Wi,{control:b.control,name:"categoryId",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.xJ,{children:[(0,s.jsx)(u.NI,{children:(0,s.jsx)(U,{options:a,...t})}),(0,s.jsx)(u.zG,{})]})}}),(0,s.jsx)("div",{className:"flex items-center gap-x-2",children:(0,s.jsx)(f.z,{disabled:!v||y,type:"submit",children:"Save"})})]})})]})}},12335:function(e,t,r){"use strict";r.r(t),r.d(t,{ChaptersForm:function(){return w}});var s=r(57437),a=r(74578),n=r(29222),i=r(38110),l=r(61865),o=r(86264),d=r(91981),c=r(2265),m=r(5925),u=r(24033),f=r(66737),x=r(3762),p=r(70306),h=r(43904),g=r(38122),j=r(64664),b=r(53905),y=r(79214);let v=e=>{let{items:t,onReorder:r,onEdit:a}=e,[n,i]=(0,c.useState)(!1),[l,o]=(0,c.useState)(t);return((0,c.useEffect)(()=>{i(!0)},[]),(0,c.useEffect)(()=>{o(t)},[t]),n)?(0,s.jsx)(g.Z5,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(l),[s]=t.splice(e.source.index,1);t.splice(e.destination.index,0,s);let a=Math.min(e.source.index,e.destination.index),n=Math.max(e.source.index,e.destination.index),i=t.slice(a,n+1);o(t);let d=i.map(e=>({id:e.id,position:t.findIndex(t=>t.id===e.id)}));r(d)},children:(0,s.jsx)(g.bK,{droppableId:"chapters",children:e=>(0,s.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[l.map((e,t)=>(0,s.jsx)(g._l,{draggableId:e.id,index:t,children:t=>(0,s.jsxs)("div",{className:(0,p.cn)("flex items-center gap-x-2 bg-slate-200 border-slate-200 border text-slate-700 rounded-md mb-4 text-sm",e.isPublished&&"bg-sky-100 border-sky-200 text-sky-700"),ref:t.innerRef,...t.draggableProps,children:[(0,s.jsx)("div",{className:(0,p.cn)("px-2 py-3 border-r border-r-slate-200 hover:bg-slate-300 rounded-l-md transition",e.isPublished&&"border-r-sky-200 hover:bg-sky-200"),...t.dragHandleProps,children:(0,s.jsx)(j.Z,{className:"h-5 w-5"})}),e.title,(0,s.jsxs)("div",{className:"ml-auto pr-2 flex items-center gap-x-2",children:[e.isFree&&(0,s.jsx)(y.C,{children:"Free"}),(0,s.jsx)(y.C,{className:(0,p.cn)("bg-slate-500",e.isPublished&&"bg-sky-700"),children:e.isPublished?"Published":"Draft"}),(0,s.jsx)(b.Z,{onClick:()=>a(e.id),className:"w-4 h-4 cursor-pointer hover:opacity-75 transition"})]})]})},e.id)),e.placeholder]})})}):null},N=a.Ry({title:a.Z_().min(1)}),w=e=>{let{initialData:t,courseId:r}=e,[a,g]=(0,c.useState)(!1),[j,b]=(0,c.useState)(!1),y=()=>{g(e=>!e)},w=(0,u.useRouter)(),C=(0,l.cI)({resolver:(0,i.F)(N),defaultValues:{title:""}}),{isSubmitting:Z,isValid:k}=C.formState,P=async e=>{try{await n.Z.post("/api/courses/".concat(r,"/chapters"),e),m.ZP.success("Chapter created"),y(),w.refresh()}catch(e){m.ZP.error("Something went wrong")}},S=async e=>{try{b(!0),await n.Z.put("/api/courses/".concat(r,"/chapters/reorder"),{list:e}),m.ZP.success("Chapters reordered"),w.refresh()}catch(e){m.ZP.error("Something went wrong")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"relative mt-6 border bg-slate-100 rounded-md p-4",children:[j&&(0,s.jsx)("div",{className:"absolute h-full w-full bg-slate-500/20 top-0 right-0 rounded-m flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"animate-spin h-6 w-6 text-sky-700"})}),(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course chapters",(0,s.jsx)(x.z,{onClick:y,variant:"ghost",children:a?(0,s.jsx)(s.Fragment,{children:"Cancel"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add a chapter"]})})]}),a&&(0,s.jsx)(f.l0,{...C,children:(0,s.jsxs)("form",{onSubmit:C.handleSubmit(P),className:"space-y-4 mt-4",children:[(0,s.jsx)(f.Wi,{control:C.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(f.xJ,{children:[(0,s.jsx)(f.NI,{children:(0,s.jsx)(h.I,{disabled:Z,placeholder:"e.g. 'Introduction to the course'",...t})}),(0,s.jsx)(f.zG,{})]})}}),(0,s.jsx)(x.z,{disabled:!k||Z,type:"submit",children:"Create"})]})}),!a&&(0,s.jsxs)("div",{className:(0,p.cn)("text-sm mt-2",!t.chapters.length&&"text-slate-500 italic"),children:[!t.chapters.length&&"No chapters",(0,s.jsx)(v,{onEdit:e=>{w.push("/teacher/courses/".concat(r,"/chapters/").concat(e))},onReorder:S,items:t.chapters||[]})]}),!a&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-4",children:"Drag and drop to reorder the chapters"})]})}},44478:function(e,t,r){"use strict";r.r(t),r.d(t,{DescriptionForm:function(){return g}});var s=r(57437),a=r(74578),n=r(29222),i=r(38110),l=r(61865),o=r(53905),d=r(2265),c=r(5925),m=r(24033),u=r(66737),f=r(3762),x=r(70306);let p=d.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});p.displayName="Textarea";let h=a.Ry({description:a.Z_().min(1,{message:"Description is required"})}),g=e=>{let{initialData:t,courseId:r}=e,[a,g]=(0,d.useState)(!1),j=()=>g(e=>!e),b=(0,m.useRouter)(),y=(0,l.cI)({resolver:(0,i.F)(h),defaultValues:{description:(null==t?void 0:t.description)||""}}),{isSubmitting:v,isValid:N}=y.formState,w=async e=>{try{await n.Z.patch("/api/courses/".concat(r),e),c.ZP.success("Course updated"),j(),b.refresh()}catch(e){c.ZP.error("Something went wrong")}};return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course description",(0,s.jsx)(f.z,{onClick:j,variant:"ghost",children:a?(0,s.jsx)(s.Fragment,{children:"Cancel"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Edit description"]})})]}),!a&&(0,s.jsx)("p",{className:(0,x.cn)("text-sm mt-2",!t.description&&"text-slate-500 italic"),children:t.description||"No description"}),a&&(0,s.jsx)(u.l0,{...y,children:(0,s.jsxs)("form",{onSubmit:y.handleSubmit(w),className:"space-y-4 mt-4",children:[(0,s.jsx)(u.Wi,{control:y.control,name:"description",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.xJ,{children:[(0,s.jsx)(u.NI,{children:(0,s.jsx)(p,{disabled:v,placeholder:"e.g. 'This course is about...'",...t})}),(0,s.jsx)(u.zG,{})]})}}),(0,s.jsx)("div",{className:"flex items-center gap-x-2",children:(0,s.jsx)(f.z,{disabled:!N||v,type:"submit",children:"Save"})})]})})]})}},23065:function(e,t,r){"use strict";r.r(t),r.d(t,{ImageForm:function(){return h}});var s=r(57437),a=r(74578),n=r(29222),i=r(91981),l=r(53905),o=r(38438),d=r(2265),c=r(5925),m=r(24033),u=r(16691),f=r.n(u),x=r(3762),p=r(64178);a.Ry({imageUrl:a.Z_().min(1,{message:"Image is required"})});let h=e=>{let{initialData:t,courseId:r}=e,[a,u]=(0,d.useState)(!1),h=()=>u(e=>!e),g=(0,m.useRouter)(),j=async e=>{try{await n.Z.patch("/api/courses/".concat(r),e),c.ZP.success("Course updated"),h(),g.refresh()}catch(e){c.ZP.error("Something went wrong")}};return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course image",(0,s.jsxs)(x.z,{onClick:h,variant:"ghost",children:[a&&(0,s.jsx)(s.Fragment,{children:"Cancel"}),!a&&!t.imageUrl&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Add an image"]}),!a&&t.imageUrl&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Edit image"]})]})]}),!a&&(t.imageUrl?(0,s.jsx)("div",{className:"relative aspect-video mt-2",children:(0,s.jsx)(f(),{alt:"Upload",fill:!0,className:"object-cover rounded-md",src:t.imageUrl})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-60 bg-slate-200 rounded-md",children:(0,s.jsx)(o.Z,{className:"h-10 w-10 text-slate-500"})})),a&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.p,{endpoint:"courseImage",onChange:e=>{e&&j({imageUrl:e})}}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-4",children:"16:9 aspect ratio recommended"})]})]})}},92873:function(e,t,r){"use strict";r.r(t),r.d(t,{PriceForm:function(){return j}});var s=r(57437),a=r(74578),n=r(29222),i=r(38110),l=r(61865),o=r(53905),d=r(2265),c=r(5925),m=r(24033),u=r(66737),f=r(3762),x=r(70306),p=r(43904),h=r(36840);let g=a.Ry({price:a.oQ.number()}),j=e=>{let{initialData:t,courseId:r}=e,[a,j]=(0,d.useState)(!1),b=()=>j(e=>!e),y=(0,m.useRouter)(),v=(0,l.cI)({resolver:(0,i.F)(g),defaultValues:{price:(null==t?void 0:t.price)||void 0}}),{isSubmitting:N,isValid:w}=v.formState,C=async e=>{try{await n.Z.patch("/api/courses/".concat(r),e),c.ZP.success("Course updated"),b(),y.refresh()}catch(e){c.ZP.error("Something went wrong")}};return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course price",(0,s.jsx)(f.z,{onClick:b,variant:"ghost",children:a?(0,s.jsx)(s.Fragment,{children:"Cancel"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Edit price"]})})]}),!a&&(0,s.jsx)("p",{className:(0,x.cn)("text-sm mt-2",!t.price&&"text-slate-500 italic"),children:t.price?(0,h.T)(t.price):"No price"}),a&&(0,s.jsx)(u.l0,{...v,children:(0,s.jsxs)("form",{onSubmit:v.handleSubmit(C),className:"space-y-4 mt-4",children:[(0,s.jsx)(u.Wi,{control:v.control,name:"price",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.xJ,{children:[(0,s.jsx)(u.NI,{children:(0,s.jsx)(p.I,{type:"number",step:"0.01",disabled:N,placeholder:"Set a price for your course",...t})}),(0,s.jsx)(u.zG,{})]})}}),(0,s.jsx)("div",{className:"flex items-center gap-x-2",children:(0,s.jsx)(f.z,{disabled:!w||N,type:"submit",children:"Save"})})]})})]})}},83662:function(e,t,r){"use strict";r.r(t),r.d(t,{TitleForm:function(){return h}});var s=r(57437),a=r(74578),n=r(29222),i=r(38110),l=r(61865),o=r(53905),d=r(2265),c=r(5925),m=r(24033),u=r(66737),f=r(43904),x=r(3762);let p=a.Ry({title:a.Z_().min(1,{message:"Title is required"})}),h=e=>{let{initialData:t,courseId:r}=e,[a,h]=(0,d.useState)(!1),g=()=>h(e=>!e),j=(0,m.useRouter)(),b=(0,l.cI)({resolver:(0,i.F)(p),defaultValues:t}),{isSubmitting:y,isValid:v}=b.formState,N=async e=>{try{await n.Z.patch("/api/courses/".concat(r),e),c.ZP.success("Course updated"),g(),j.refresh()}catch(e){c.ZP.error("Something went wrong")}};return(0,s.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course title",(0,s.jsx)(x.z,{onClick:g,variant:"ghost",children:a?(0,s.jsx)(s.Fragment,{children:"Cancel"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Edit title"]})})]}),!a&&(0,s.jsx)("p",{className:"text-sm mt-2",children:t.title}),a&&(0,s.jsx)(u.l0,{...b,children:(0,s.jsxs)("form",{onSubmit:b.handleSubmit(N),className:"space-y-4 mt-4",children:[(0,s.jsx)(u.Wi,{control:b.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.xJ,{children:[(0,s.jsx)(u.NI,{children:(0,s.jsx)(f.I,{disabled:y,placeholder:"e.g. 'Advanced web development'",...t})}),(0,s.jsx)(u.zG,{})]})}}),(0,s.jsx)("div",{className:"flex items-center gap-x-2",children:(0,s.jsx)(x.z,{disabled:!v||y,type:"submit",children:"Save"})})]})})]})}},64178:function(e,t,r){"use strict";r.d(t,{p:function(){return d}});var s=r(57437),a=r(5925),n=r(4218);let{UploadButton:i,UploadDropzone:l,Uploader:o}=(0,n.jp)(),d=e=>{let{onChange:t,endpoint:r}=e;return(0,s.jsx)(l,{endpoint:r,onClientUploadComplete:e=>{t(null==e?void 0:e[0].url)},onUploadError:e=>{a.ZP.error("".concat(null==e?void 0:e.message))}})}},68746:function(e,t,r){"use strict";r.d(t,{s:function(){return b}});var s=r(57437),a=r(2265),n=r(52506),i=r(70306),l=r(3762);let o=n.fC,d=n.xz,c=e=>{let{className:t,...r}=e;return(0,s.jsx)(n.h_,{className:(0,i.cn)(t),...r})};c.displayName=n.h_.displayName;let m=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...l,ref:t})});m.displayName=n.aV.displayName;let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",r),...a})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};x.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",r),...a})});p.displayName=n.Dx.displayName;let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});h.displayName=n.dk.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.aU,{ref:t,className:(0,i.cn)((0,l.d)(),r),...a})});g.displayName=n.aU.displayName;let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.$j,{ref:t,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});j.displayName=n.$j.displayName;let b=e=>{let{children:t,onConfirm:r}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(d,{asChild:!0,children:t}),(0,s.jsxs)(u,{children:[(0,s.jsxs)(f,{children:[(0,s.jsx)(p,{children:"Are you sure?"}),(0,s.jsx)(h,{children:"This action cannot be undone."})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)(j,{children:"Cancel"}),(0,s.jsx)(g,{onClick:r,children:"Continue"})]})]})]})}},79214:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(57437);r(2265);var a=r(96061),n=r(70306);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},3762:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var s=r(57437),a=r(2265),n=r(67256),i=r(96061),l=r(70306);let o=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white hover:bg-emerald-600/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,m=d?n.g7:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},66737:function(e,t,r){"use strict";r.d(t,{l0:function(){return u},NI:function(){return b},pf:function(){return y},Wi:function(){return x},xJ:function(){return g},lX:function(){return j},zG:function(){return v}});var s=r(57437),a=r(2265),n=r(67256),i=r(61865),l=r(70306),o=r(36743),d=r(96061);let c=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(o.f,{ref:t,className:(0,l.cn)(c(),r),...a})});m.displayName=o.f.displayName;let u=i.RV,f=a.createContext({}),x=e=>{let{...t}=e;return(0,s.jsx)(f.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},p=()=>{let e=a.useContext(f),t=a.useContext(h),{getFieldState:r,formState:s}=(0,i.Gc)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},h=a.createContext({}),g=a.forwardRef((e,t)=>{let{className:r,...n}=e,i=a.useId();return(0,s.jsx)(h.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...n})})});g.displayName="FormItem";let j=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:i}=p();return(0,s.jsx)(m,{ref:t,className:(0,l.cn)(n&&"text-destructive",r),htmlFor:i,...a})});j.displayName="FormLabel";let b=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:l,formMessageId:o}=p();return(0,s.jsx)(n.g7,{ref:t,id:i,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...r})});b.displayName="FormControl";let y=a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=p();return(0,s.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});y.displayName="FormDescription";let v=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e,{error:i,formMessageId:o}=p(),d=i?String(null==i?void 0:i.message):a;return d?(0,s.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",r),...n,children:d}):null});v.displayName="FormMessage"},43904:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(57437),a=r(2265),n=r(70306);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},57645:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});var s=r(94660);let a=(0,s.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}))},36840:function(e,t,r){"use strict";r.d(t,{T:function(){return s}});let s=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},70306:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(57042),a=r(23986);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m)((0,s.W)(t))}}},function(e){e.O(0,[338,263,677,547,128,222,712,569,45,405,282,971,596,744],function(){return e(e.s=13067)}),_N_E=e.O()}]);